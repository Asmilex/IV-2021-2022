version: 2.1
# See: https://circleci.com/docs/2.0/orb-intro/
orbs:
  # The python orb contains a set of prepackaged CircleCI configuration you can use repeatedly in your configuration files
  # Orb commands and jobs help you with common scripting around a language/tool
  # so you dont have to copy and paste it everywhere.
  # See the orb documentation here: https://circleci.com/developer/orbs/orb/circleci/python
  python: circleci/python@1.2

jobs:
  test:
    parameters:
      python-version:
        type: string
        default: "3.8-slim"
    docker:
      - image: jantoniovr/iv-2021-2022:<< parameters.python-version >>
    steps:
      - checkout
      - run: echo `whoami` && echo $PATH
      - run: invoke test
      #- setup_remote_docker:
      #    version: 19.03.13
      #- run: docker run -t -v `pwd`:/app/test jantoniovr/iv-2021-2022
      # - run: echo "OK"
      
# Invoke jobs via workflows
# See: https://circleci.com/docs/2.0/configuration-reference/#workflows
workflows:
  sample: # This is the name of the workflow, feel free to change it to better match your workflow.
    # Inside the workflow, you define the jobs you want to run.
    jobs:
      - test:
        parameters:
          python-version: ['3.10-slim', '3.9-slim', '3.8-slim']
